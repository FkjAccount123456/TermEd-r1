# TermEd本身
## 你说得对，但是我就是这么处理瓶颈的
- 因为作品的某一个缺陷导致后续工作无法进行？重写呗（
## 虽然但是，不能让显示影响逻辑，就像不能让局部影响整体
- 所以list[list[list[str]]]本身就是不合逻辑的
- 争取将编辑、显示和插件解耦合开，然后由edcore粘在一起
- 所以这就是为什么Python是胶水语言（
- 事实上渲染复杂度再高也只有一屏，所以代码存储结构可以随便，只要不渲染复杂度与一屏之外的事物相关即可
- 一切事物的底层都很简洁，最复杂的那部分是外显的功能
- 这就是为什么自动折行很难写（
## 2024-8-22 写高亮之前还是有点犯怵，先写下思路
- 状态继承法，无论添加还是删除，只需要基于未修改的最后一行的尾状态分析
- 一直分析到未修改的一行，并且该行之前的尾状态未改变
### 不敢写，感觉工作量很大，完不成
- 凉拌
- 想想以前的伟大成就
- 为啥以前能完成那么多，是什么支撑着？
- 这不是兴趣爱好吗
- 去了
## 2025-2-4
现在看来TermEd自身的设计还挺不错的  
编辑和显示到现在也一点不沾边  
对写分屏来说真是天大的好处
编辑基本可以不动，顶层写一个包揽一切的显示就行了  
不过这也够难的了  
然而现在速度上又有瓶颈，早知道直接上Piece Table或者Rope之类的  
要知道Vim每秒能插入成千上万的字符  
很好，betterlang也就只有一处编译是复杂的  
——而我TermEd哪哪都复杂！！！  
### 关于分屏
Vim一样的分屏切换方式一定是要有的，虽然计算可能复杂一点  
此外还应当有另外一套方式  
通过选择切换，就像TreeSitter那样  
比如上下分屏，可以先选择当前窗口的父节点，然后选择当前节点的某一个子节点
这样就可以轻松的实现NERDTree TagBar一类工具  
### 怎么绘制
那就递归绘制吧  
速度先不管了（  
## 2025-3-15
又一个月了
即将重写Drawer，希望能摆脱之前的屎山
## 2025-3-25
貌似可以了  
或许可以commit一版了  
这可真是大更了  
renderer又逐渐不行了  
或许等跟不上需求的时候它也得重写  
希望可以像Vim的那样  
甚至希望能直接引入Vim的语法文件，显然懒得自己写
## 2025-5-14
很好，马上就要把Python写成Java了  
继承网会比写多态还复杂  
就没有别的办法吗、、、
## 2025-5-25
现有逻辑下分离移动操作难以实现  
应当把KeyReader分离出来  
虽然我对状态机了解不多但不代表这么简单的东西都写不出来
## 2025-5-31
还应当重写高亮逻辑，实现以字符为单位的增量高亮  
看上去比上一个目标简单点，先实现哪个呢？（
- 重写Renderer基类，使其以类似textinputer的方式管理各种状态
KeyReader不准备写了，没必要，完全可以用一个keymap生成函数来搞  
时至今日，这种强大的Python高亮算法我已经基本无法理解了，只知道它确实能跑而且效果比一般的词法高亮好很多
## 2025-7-2
FloatWindow不应该继承Window类，这么一想继承结构就简单多了，不过仍然好几层
## 2025-7-31
最近TermEd飞速推进啊，下一步写什么呢  
我知道了，先写文档吧（doge  
看起来README里面一堆flags一个比一个复杂  
textobj不能加参数的问题也还没解决，貌似需要回调
## 2025-8-13
真正的挑战来了，要对代码异步化处理，主要是Tree-sitter的性能问题  
直接把整个renderer放独立进程里，这样就可以避免大量数据的传递了（  
然而那个renderer甚至还需要再持有一个textinputer、、、
## 2025-9-3
前期（当然现在也仍然是前期）冲太快了，很多细节没有考虑到，就比如现在遇到的缩进、Tab宽度等等  
配置语言恐怕得赶紧了  
从整体的角度看，只能说TermEd唐成啥了，各个类之间互相引用，要么就拆开没有静态检查红利  
要么就挤成一坨不管Jedi Pyright还是Pylance全爆炸，看着就发晕，主打一个懵逼  
我说白了，这才是真正的挑战啊、、、  
我去，还有传说中的textobj加参数，就这种盛唐逆天结构一个函数上百行根本改不动  
受不了pylance了，上Vim吧
## 2025-9-20
好吧，首先打算实现Vim输入回显的功能，就跟Vim一样放右下角就行  
就这个就得改一堆了  
prio可以设为-1，这样可以避免遮挡COMMAND输入
## 2025-9-21
prio设-1是不行的，这样绘制不上去，不过其他思路都没问题
